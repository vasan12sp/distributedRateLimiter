<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rate Guard Docs</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        body { background:#f8f9fa; }
        .doc-hero { background: #fff; padding: 1.25rem; border-radius:8px; box-shadow: 0 6px 20px rgba(0,0,0,0.04); }
        pre.api { background:#0d1117; color:#e6edf3; padding:1rem; border-radius:8px; overflow:auto; }
        code.inline { background:#f1f3f5; padding:0.1rem 0.4rem; border-radius:6px; }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand" th:href="@{/}">Rate Guard Docs</a>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link" th:href="@{/}">Home</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/customer/apikeys}">Get API Key</a></li>
            </ul>
        </div>
    </div>
</nav>

<div class="container mt-4 mb-5">
    <div class="doc-hero mb-4">
        <h2>Rate Guard API — Check Limit</h2>
        <p class="text-muted">Single endpoint to check whether a request should be allowed. Keep requests lightweight for minimal latency.</p>
    </div>

    <section class="mb-4">
        <h5>Request</h5>
        <p><strong>POST</strong> <code class="inline">https://rateguard.tech/api/check</code></p>
        <p class="text-muted">Headers:</p>
        <ul class="text-muted">
            <li><code class="inline">X-API-Key: &lt;your_key&gt;</code></li>
            <li>(Optional) Content-Type: application/json</li>
        </ul>

        <p class="text-muted">Body (JSON):</p>
        <pre class="api">{
  "identifier": "user",
  "endpoint": "login",
  "method": "PUT"
}</pre>
    </section>

    <section class="mb-4">
        <h5>Responses</h5>
        <p class="text-muted">Successful (allowed):</p>
        <pre class="api">{
  "allowed": true,
  "retryAfterSeconds": 0,
  "remaining": 72
}</pre>

        <p class="text-muted">Denied (rate limit exceeded):</p>
        <pre class="api">{
  "allowed": false,
  "retryAfterSeconds": 56,
  "remaining": 0
}</pre>

        <p class="text-muted">Notes:</p>
        <ul class="text-muted">
            <li><strong>identifier</strong> — your internal user id or other identifier for grouping requests (no IP required).</li>
            <li><strong>endpoint</strong> — logical endpoint name to match rate-limit rules (e.g., <code class="inline">login</code>).</li>
            <li><strong>method</strong> — HTTP method (GET, POST, PUT, DELETE, etc.).</li>
        </ul>
    </section>

    <section class="mb-4">
        <h5>Integration tips</h5>
        <ul class="text-muted">
            <li>Call Rate Guard synchronously before processing requests that are costly or change state.</li>
            <li>Cache decisions for a few hundred milliseconds if your path is extremely hot to reduce latency.</li>
            <li>On <code class="inline">allowed: false</code>, return HTTP <code class="inline">429</code> to the client with the <code class="inline">retryAfterSeconds</code> value.</li>
        </ul>
    </section>

    <section class="mb-4">
        <h5>Examples (curl)</h5>
        <pre class="api">curl -X POST https://rateguard.tech/api/check \
  -H "X-API-Key: YOUR_KEY" \
  -H "Content-Type: application/json" \
  -d '{ "identifier": "user", "endpoint": "login", "method": "PUT" }'
</pre>
    </section>


</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
